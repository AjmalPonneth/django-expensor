{% extends 'base.html' %}
{% load humanize %}
{% load income_utils %}


{% block body %}

<div class="col-md-10 col-md-offset-1">

    {% if data %}
        <div class="table-responsive">
            <table class="table table-bordered table-hover">

                <thead>
                    <tr>
                        <th><i class="far fa-calendar-alt"></i> Year</th>
                        <th class="info"><i class="fas fa-coins"></i> Income</th>
                        <th class="danger"><i class="far fa-credit-card"></i> Expense</th>
                        <th class="success"><i class="fas fa-piggy-bank"></i> Saved</th>
                        <th class="warning"><i class="fas fa-percentage"></i> Expense Rate</th>
                    </tr>
                </thead>

                {% for row in data %}
                    <tr>
                        <td class="active">
                            <strong>{{ row.date.year }}</strong>
                        </td>

                        <td>
                            <a class="black-text" href="{% url 'income:month-income-list' %}?year={{ row.date.year }}">
                                {{ row.income_sum|intcomma }}
                            </a>
                        </td>

                        <td>
                            <a class="black-text" href="{% url 'expense:month-wise-expense' %}?year={{ row.date.year }}">
                                {{ row.expense_sum|intcomma }}
                            </a>
                        </td>

                        <td>
                            {{ row.saved|intcomma }}
                        </td>

                        <td 
                            {% if row.expense_ratio > 95 %}
                                class="red-text"
                            {% elif row.expense_ratio > 80 %}
                                class="warning-text"
                            {% else %}
                                class="green-text"
                            {% endif %}
                        >
                            {{ row.expense_ratio }}%
                        </td>
                    </tr>
                {% endfor %}

            </table>
        </div>
        <sub>{{ now }}</sub>
    {% else %}
        <h2>No data to show.</h2>
    {% endif %}

</div>

{% endblock body %}


{% block js %}

<script type="text/javascript">

  $(document).ready(function(){

  });

</script>

{% endblock js %}